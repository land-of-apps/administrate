# Turn on validation, so we can use import:
version: ~> 1.0

services:
  - postgresql

addons:
  chrome: stable


#86.0.4240.22

# install selenium chrome driver instructions from
# https://github.com/yizeng/setup-selenium-webdriver-ruby-project-on-travis-ci/blob/master/.travis.yml

before_install:
  - gem install selenium-webdriver
  - wget -N https://chromedriver.storage.googleapis.com/85.0.4183.102/chromedriver_linux64.zip -P ~/Downloads
  - unzip ~/Downloads/chromedriver_linux64.zip -d ~/Downloads
  - sudo mv -f ~/Downloads/chromedriver /usr/local/share/
  - sudo chmod +x /usr/local/share/chromedriver
  - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
  - sudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver

  - travis_wait ./bin/setup

script:
- bundle exec rspec && bundle exec appraisal rspec
